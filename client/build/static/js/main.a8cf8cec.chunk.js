(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);a(49);var n=a(0),r=a.n(n),l=a(10),o=a.n(l),c=(a(54),a(22)),s=(a(55),a(11)),u=a(12),i=a.n(u),d=a(16),m=a(14),b=a(17),p=a(6);function g(){}var v=Object(n.createContext)({token:null,userId:null,ALLusers:null,login:g,logout:g,isAuthenticated:!1,userIsBlocked:!1,userIsDeleted:!1,deletedUsers:null}),f=function(){var e=Object(n.useContext)(v),t=Object(n.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[]),a=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),o=Object(p.a)(l,2),c=o[0],s=o[1];return{loading:a,request:Object(n.useCallback)(function(){var e=Object(d.a)(i.a.mark((function e(t){var a,n,l,o,c,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:"GET",n=u.length>2&&void 0!==u[2]?u[2]:null,l=u.length>3&&void 0!==u[3]?u[3]:{},r(!0),e.prev=4,n&&(n=JSON.stringify(n),l["Content-type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:l});case 8:return o=e.sent,e.next=11,o.json();case 11:if(c=e.sent,o.ok){e.next=14;break}throw new Error(c.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return r(!1),e.abrupt("return",c);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),s(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:c,clearError:Object(n.useCallback)((function(){return s(null)}),[])}}(),l=a.loading,o=a.request,c=a.error,s=a.clearError,u=new Date,g=Object(n.useState)({login:"",password:"",email:"",userIsDeleted:!1,deletedUsers:[],userIsBlocked:!1,dataLogin:u}),f=Object(p.a)(g,2),E=f[0],h=f[1];Object(n.useEffect)((function(){t(c),s()}),[c,t,s]),Object(n.useEffect)((function(){window.M.updateTextFields()}),[]);var O=function(t){var a;h(Object(b.a)({},E,(a={},Object(m.a)(a,t.target.name,t.target.value),Object(m.a)(a,"userIsDeleted",e.userIsDeleted),Object(m.a)(a,"deletedUsers",e.deletedUsers),a)))},j=function(){var e=Object(d.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/api/auth/register","POST",Object(b.a)({},E));case 3:a=e.sent,t(a.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var t=Object(d.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o("/api/auth/login","POST",Object(b.a)({},E));case 3:a=t.sent,e.login(a.token,a.userId,a.ALLusers,a.userIsBlocked,a.userIsDeleted,a.deletedUsers,a.dataLogin),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",id:"email",type:"text",name:"email",value:E.email,onChange:O}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\u041b\u043e\u0433\u0438\u043d: "),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",id:"login",type:"text",name:"login",value:E.login,onChange:O}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\u041f\u0430\u0440\u043e\u043b\u044c: "),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",id:"password",type:"password",name:"password",value:E.password,onChange:O}))))),r.a.createElement("div",{className:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"btn-group mr-2",role:"group","aria-label":"First group"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:l,onClick:k}," \u0412\u043e\u0439\u0442\u0438"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:l,onClick:j},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))))))},E=a(15),h=function(){var e=Object(n.useContext)(v),t=e.ALLusers;var a={onDeleteRow:function(t){-1!==t.indexOf(e.userId,0)&&e.del()}};return r.a.createElement("nav",null,r.a.createElement("div",{className:"btn-toolbar",role:"toolbar","aria-label":"Toolbar with button groups"},r.a.createElement("div",{className:"btn-group mr-2",role:"group","aria-label":"First group"},r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){alert("\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432\u0441\u0435 \u043f\u043e\u0434 \u0437\u0430\u0449\u0438\u0442\u043e\u0439 \u0441\u0438\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0433\u043e \u0434\u0440\u0430\u043a\u043e\u043d\u0430 \u042d\u0440\u043d\u0435\u0441\u0442\u0430, \u043d\u043e \u043c\u043e\u0436\u0435\u0448\u044c \u043f\u043e\u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u0433\u043e-\u0442\u043e... ")}},"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){alert("\u0421\u043f\u0430\u0441\u0438\u044e\u043e, \u0447\u0442\u043e \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0448\u044c \u0431\u043e\u0440\u043e\u0442\u044c\u0441\u044f \u0441 \u043f\u0440\u0435\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c\u044e!")}},"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(t){alert("\u041a\u0430\u043a \u0436\u0430\u043b\u044c \u0440\u0430\u0441\u0441\u0442\u043e\u0432\u0430\u0442\u044c\u0441\u044f((("),t.preventDefault(),e.logout()}},"\u0412\u044b\u0439\u0442\u0438 \u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"))),r.a.createElement("div",null,r.a.createElement(E.BootstrapTable,{data:t,deleteRow:!0,selectRow:{mode:"checkbox",bgColor:"red"},options:a},r.a.createElement(E.TableHeaderColumn,{dataField:"_id",isKey:!0,width:"30%"},"ID"),r.a.createElement(E.TableHeaderColumn,{dataField:"dataRegistration",width:"40%"},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),r.a.createElement(E.TableHeaderColumn,{dataField:"login",width:"25%"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement(E.TableHeaderColumn,{dataField:"email",width:"25%"},"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430"))))};var O=function(){var e=function(){var e=Object(n.useState)(null),t=Object(p.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),o=Object(p.a)(l,2),c=o[0],s=o[1],u=Object(n.useState)(null),i=Object(p.a)(u,2),d=i[0],m=i[1],b=Object(n.useState)(!1),g=Object(p.a)(b,2),v=g[0],f=g[1],E=Object(n.useState)(!1),h=Object(p.a)(E,2),O=h[0],j=h[1],k=Object(n.useState)(null),w=Object(p.a)(k,2),I=w[0],y=w[1],C=Object(n.useState)(null),S=Object(p.a)(C,2),x=S[0],N=S[1],D=Object(n.useCallback)((function(e,t,a,n,l,o){r(e),f(n),j(l),N(o),y(a),m(t),localStorage.setItem("userData",JSON.stringify({userId:t,token:e,ALLusers:a})),localStorage.setItem("delete",JSON.stringify({userIsBlocked:n,userIsDeleted:l,deletedUsers:o}))}),[]),L=Object(n.useCallback)((function(){r(null),m(null),localStorage.removeItem("userData")}),[]),T=Object(n.useCallback)((function(){j(!0),r(null),localStorage.removeItem("userData")}),[]);return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData")),t=JSON.parse(localStorage.getItem("delete"));e&&e.token&&D(e.token,e.userId,e.ALLusers,t.userIsDeleted,t.deletedUsers),s(!0)}),[D]),{login:D,logout:L,del:T,token:a,userId:d,ready:c,ALLusers:I,userIsBlocked:v,userIsDeleted:O,deletedUsers:x}}(),t=e.token,a=e.login,l=e.logout,o=e.del,u=e.userId,i=e.ALLusers,d=e.userIsDeleted,m=e.userIsBlocked,b=e.deletedUsers,g=!!t,E=function(e){return e?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/table",exact:!0}),r.a.createElement(s.a,{to:"/table"})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0},r.a.createElement(f,null)),r.a.createElement(s.a,{to:"/"}))}(g);return r.a.createElement(v.Provider,{value:{token:t,login:a,logout:l,userId:u,isAuthenticated:g,ALLusers:i,userIsDeleted:d,userIsBlocked:m,del:o,deletedUsers:b}},r.a.createElement(c.a,null,g&&r.a.createElement(h,null),r.a.createElement("div",{className:"container"},E)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t,a){e.exports=a(102)},54:function(e,t,a){}},[[48,1,2]]]);
//# sourceMappingURL=main.a8cf8cec.chunk.js.map